<div class="dashboard-container">
  <!-- Header Section -->
  <div class="dashboard-header">
    <div class="header-content">
      <div class="header-text">
        <h1>Bug Tracker Dashboard</h1>
        <p>Welcome back, <strong>{{username}}</strong> â€¢ Real-time project insights</p>
      </div>
      <div class="header-actions">
        <button class="refresh-btn" (click)="loadBugCounts()">
          <i class="pi pi-refresh"></i>
          Refresh
        </button>
      </div>
    </div>
  </div>
  
  <!-- Stats Overview -->
  <div class="stats-section">
    <div class="stats-grid">
      <div class="stat-card primary">
        <div class="stat-header">
          <div class="stat-icon">
            <i class="pi pi-bug"></i>
          </div>
          <div class="stat-trend">
            <i class="pi pi-arrow-up"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.total }}</div>
          <div class="stat-label">Total Bugs</div>
        </div>
      </div>
      
      <div class="stat-card danger">
        <div class="stat-header">
          <div class="stat-icon">
            <i class="pi pi-exclamation-circle"></i>
          </div>
          <div class="stat-trend">
            <i class="pi pi-arrow-up"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.open }}</div>
          <div class="stat-label">Open Issues</div>
        </div>
      </div>
      
      <div class="stat-card warning">
        <div class="stat-header">
          <div class="stat-icon">
            <i class="pi pi-clock"></i>
          </div>
          <div class="stat-trend">
            <i class="pi pi-minus"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.inProgress }}</div>
          <div class="stat-label">In Progress</div>
        </div>
      </div>
      
      <div class="stat-card success">
        <div class="stat-header">
          <div class="stat-icon">
            <i class="pi pi-check-circle"></i>
          </div>
          <div class="stat-trend">
            <i class="pi pi-arrow-up"></i>
          </div>
        </div>
        <div class="stat-content">
          <div class="stat-number">{{ stats.closed }}</div>
          <div class="stat-label">Resolved</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Main Content Grid -->
  <div class="main-content">
    <!-- Charts Section -->
    <div class="charts-section">
      <div class="chart-row">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Status Overview</h3>
            <div class="chart-subtitle">Current bug distribution</div>
          </div>
          <div class="chart-container">
            <canvas baseChart
                    [data]="pieChartData"
                    [type]="pieChartType"
                    [options]="chartOptions">
            </canvas>
          </div>
        </div>
        
        <div class="chart-card">
          <div class="chart-header">
            <h3>Priority Levels</h3>
            <div class="chart-subtitle">Bug priority breakdown</div>
          </div>
          <div class="chart-container">
            <canvas baseChart
                    [data]="doughnutChartData"
                    [type]="doughnutChartType"
                    [options]="chartOptions">
            </canvas>
          </div>
        </div>
      </div>
      
      <div class="chart-full">
        <div class="chart-card">
          <div class="chart-header">
            <h3>Priority vs Status Analysis</h3>
            <div class="chart-subtitle">Detailed breakdown of bug priorities by status</div>
          </div>
          <div class="chart-container large">
            <canvas baseChart
                    [data]="barChartData"
                    [type]="barChartType"
                    [options]="chartOptions">
            </canvas>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Quick Actions -->
      <div class="sidebar-card">
        <div class="sidebar-header">
          <h3>Quick Actions</h3>
        </div>
        <div class="action-list">
          <button class="action-item primary" routerLink="/bugs">
            <div class="action-icon">
              <i class="pi pi-list"></i>
            </div>
            <div class="action-content">
              <div class="action-title">View All Bugs</div>
              <div class="action-desc">Browse complete bug list</div>
            </div>
          </button>
          
          <button class="action-item success" routerLink="/bugs">
            <div class="action-icon">
              <i class="pi pi-plus"></i>
            </div>
            <div class="action-content">
              <div class="action-title">Report Bug</div>
              <div class="action-desc">Create new bug report</div>
            </div>
          </button>
        </div>
      </div>
      
      <!-- Priority Summary -->
      <div class="sidebar-card">
        <div class="sidebar-header">
          <h3>Priority Summary</h3>
        </div>
        <div class="priority-list">
          <div class="priority-item high">
            <div class="priority-indicator"></div>
            <div class="priority-content">
              <div class="priority-label">High Priority</div>
              <div class="priority-count">{{stats.high}} bugs</div>
            </div>
          </div>
          
          <div class="priority-item medium">
            <div class="priority-indicator"></div>
            <div class="priority-content">
              <div class="priority-label">Medium Priority</div>
              <div class="priority-count">{{stats.medium}} bugs</div>
            </div>
          </div>
          
          <div class="priority-item low">
            <div class="priority-indicator"></div>
            <div class="priority-content">
              <div class="priority-label">Low Priority</div>
              <div class="priority-count">{{stats.low}} bugs</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- System Health -->
      <div class="sidebar-card">
        <div class="sidebar-header">
          <h3>System Health</h3>
        </div>
        <div class="health-metrics">
          <div class="health-item">
            <div class="health-label">Resolution Rate</div>
            <div class="health-bar">
              <div class="health-progress" [style.width.%]="stats.total > 0 ? (stats.closed / stats.total) * 100 : 0"></div>
            </div>
            <div class="health-value">{{stats.total > 0 ? ((stats.closed / stats.total) * 100).toFixed(0) : 0}}%</div>
          </div>
          
          <div class="health-item">
            <div class="health-label">Critical Issues</div>
            <div class="health-status" [class.healthy]="stats.high === 0" [class.warning]="stats.high > 0">
              {{stats.high === 0 ? 'All Clear' : stats.high + ' Active'}}
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>