<!-- Bug Detail Modal -->
<div class="modal-overlay" *ngIf="isVisible" (click)="onBackdropClick($event)">
  <div class="modal-container" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <div class="header-left">
        <h2 class="modal-title">üêõ Bug Details</h2>
        <span class="bug-id">#{{bugId}}</span>
      </div>
      <button class="close-btn" (click)="closeModal()">
        <i class="pi pi-times"></i>
      </button>
    </div>

    <!-- Modal Body -->
    <div class="modal-body">
      <!-- Bug Information -->
      <div class="bug-info-section">
        <div class="info-grid">
          <div class="info-item">
            <label>Title</label>
            <div class="info-value">{{title}}</div>
          </div>
          
          <div class="info-item" *ngIf="description">
            <label>Description</label>
            <div class="info-value description">{{description}}</div>
          </div>
          
          <div class="info-row">
            <div class="info-item">
              <label>Status</label>
              <span class="status-badge" [class]="'status-' + status.toLowerCase().replace('_', '-')">{{status}}</span>
            </div>
            
            <div class="info-item">
              <label>Priority</label>
              <span class="priority-badge" [class]="'priority-' + priority.toLowerCase()">{{priority}}</span>
            </div>
          </div>
          
          <div class="info-row">
            <div class="info-item" *ngIf="assignee">
              <label>Assignee</label>
              <div class="info-value">
                <i class="pi pi-user"></i>
                {{assignee}}
              </div>
            </div>
            
            <div class="info-item" *ngIf="project">
              <label>Project</label>
              <div class="info-value">
                <i class="pi pi-folder"></i>
                {{project}}
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Comments Section -->
      <div class="comments-section">
        <div class="section-header">
          <h3>üí¨ Comments ({{comments.length}})</h3>
        </div>
        
        <!-- Add Comment Form -->
        <div class="add-comment-form">
          <div class="comment-input-wrapper">
            <textarea 
              [(ngModel)]="newComment" 
              placeholder="Add a comment..."
              class="comment-input"
              rows="3"
              (keydown.ctrl.enter)="addComment()"
              (keydown.meta.enter)="addComment()"></textarea>
            <div class="comment-actions">
              <small class="hint">Ctrl+Enter to submit</small>
              <button class="btn-primary" (click)="addComment()" [disabled]="!newComment.trim()">
                <i class="pi pi-send"></i>
                Add Comment
              </button>
            </div>
          </div>
        </div>
        
        <!-- Comments List -->
        <div class="comments-list">
          <div class="comment-item" *ngFor="let comment of comments">
            <div class="comment-header">
              <div class="comment-author">
                <i class="pi pi-user-circle"></i>
                {{comment.author}}
              </div>
              <div class="comment-meta">
                <span class="comment-time">{{getTimeAgo(comment.timestamp)}}</span>
                <button class="delete-comment-btn" (click)="deleteComment(comment.id)" title="Delete comment">
                  <i class="pi pi-trash"></i>
                </button>
              </div>
            </div>
            <div class="comment-text">{{comment.text}}</div>
          </div>
          
          <div class="no-comments" *ngIf="comments.length === 0">
            <i class="pi pi-comment"></i>
            <p>No comments yet. Be the first to add one!</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>